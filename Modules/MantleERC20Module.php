<?php declare(strict_types = 1);

/*  Idea (c) 2023 Nikita Zhavoronkov, nikzh@nikzh.com
 *  Copyright (c) 2023-2024 3xpl developers, 3@3xpl.com, see CONTRIBUTORS.md
 *  Distributed under the MIT software license, see LICENSE.md  */

/*  This module processes ERC-20 token transfers in Mantle. It requires a geth node to run.  */

final class MantleERC20Module extends EVMERC20Module implements Module, MultipleBalanceSpecial, SupplySpecial
{
    function initialize()
    {
        // CoreModule
        $this->blockchain = 'mantle';
        $this->module = 'mantle-erc-20';
        $this->is_main = false;
        $this->first_block_date = '2023-07-02';
        $this->first_block_id = 0;

        $this->tests = [
            ['block' => 66807079, 'result' => 'a:2:{s:6:"events";a:16:{i:0;a:7:{s:11:"transaction";s:66:"0xca7b6e2081063f0c97de46dd4be3ab1f259a8d9f393795a220607c66f9eb3e47";s:8:"currency";s:42:"0xdeaddeaddeaddeaddeaddeaddeaddeaddead1111";s:7:"address";s:42:"0x628f7131cf43e88ebe3921ae78c4ba0c31872bd4";s:8:"sort_key";i:0;s:6:"effect";s:15:"-58325636664052";s:5:"block";i:66807079;s:4:"time";s:19:"2024-07-23 14:21:10";}i:1;a:7:{s:11:"transaction";s:66:"0xca7b6e2081063f0c97de46dd4be3ab1f259a8d9f393795a220607c66f9eb3e47";s:8:"currency";s:42:"0xdeaddeaddeaddeaddeaddeaddeaddeaddead1111";s:7:"address";s:42:"0x29161e1463e72a326abaed44cdcc1a0356371fb8";s:8:"sort_key";i:1;s:6:"effect";s:14:"58325636664052";s:5:"block";i:66807079;s:4:"time";s:19:"2024-07-23 14:21:10";}i:2;a:7:{s:11:"transaction";s:66:"0xca7b6e2081063f0c97de46dd4be3ab1f259a8d9f393795a220607c66f9eb3e47";s:8:"currency";s:42:"0x201eba5cc46d216ce6dc03f6a759e8e766e956ae";s:7:"address";s:42:"0x29161e1463e72a326abaed44cdcc1a0356371fb8";s:8:"sort_key";i:2;s:6:"effect";s:7:"-202500";s:5:"block";i:66807079;s:4:"time";s:19:"2024-07-23 14:21:10";}i:3;a:7:{s:11:"transaction";s:66:"0xca7b6e2081063f0c97de46dd4be3ab1f259a8d9f393795a220607c66f9eb3e47";s:8:"currency";s:42:"0x201eba5cc46d216ce6dc03f6a759e8e766e956ae";s:7:"address";s:42:"0x628f7131cf43e88ebe3921ae78c4ba0c31872bd4";s:8:"sort_key";i:3;s:6:"effect";s:6:"202500";s:5:"block";i:66807079;s:4:"time";s:19:"2024-07-23 14:21:10";}i:4;a:7:{s:11:"transaction";s:66:"0xf8675aaf1293d2bb0b3f8ffed5185437fcf5fe5680392e2c468c0c49e39a1745";s:8:"currency";s:42:"0xdeaddeaddeaddeaddeaddeaddeaddeaddead1111";s:7:"address";s:42:"0x628f7131cf43e88ebe3921ae78c4ba0c31872bd4";s:8:"sort_key";i:4;s:6:"effect";s:15:"-74886501675749";s:5:"block";i:66807079;s:4:"time";s:19:"2024-07-23 14:21:10";}i:5;a:7:{s:11:"transaction";s:66:"0xf8675aaf1293d2bb0b3f8ffed5185437fcf5fe5680392e2c468c0c49e39a1745";s:8:"currency";s:42:"0xdeaddeaddeaddeaddeaddeaddeaddeaddead1111";s:7:"address";s:42:"0x8b06c0a45791064bf2d4f4e87559691d4ec39725";s:8:"sort_key";i:5;s:6:"effect";s:14:"74886501675749";s:5:"block";i:66807079;s:4:"time";s:19:"2024-07-23 14:21:10";}i:6;a:7:{s:11:"transaction";s:66:"0xf8675aaf1293d2bb0b3f8ffed5185437fcf5fe5680392e2c468c0c49e39a1745";s:8:"currency";s:42:"0x201eba5cc46d216ce6dc03f6a759e8e766e956ae";s:7:"address";s:42:"0x8b06c0a45791064bf2d4f4e87559691d4ec39725";s:8:"sort_key";i:6;s:6:"effect";s:7:"-260000";s:5:"block";i:66807079;s:4:"time";s:19:"2024-07-23 14:21:10";}i:7;a:7:{s:11:"transaction";s:66:"0xf8675aaf1293d2bb0b3f8ffed5185437fcf5fe5680392e2c468c0c49e39a1745";s:8:"currency";s:42:"0x201eba5cc46d216ce6dc03f6a759e8e766e956ae";s:7:"address";s:42:"0x628f7131cf43e88ebe3921ae78c4ba0c31872bd4";s:8:"sort_key";i:7;s:6:"effect";s:6:"260000";s:5:"block";i:66807079;s:4:"time";s:19:"2024-07-23 14:21:10";}i:8;a:7:{s:11:"transaction";s:66:"0x5924bb978b10140c9789da5d7a3c63790dd3530c7c2b852495fd4bb6cfc39599";s:8:"currency";s:42:"0xdeaddeaddeaddeaddeaddeaddeaddeaddead1111";s:7:"address";s:42:"0xa125af1a4704044501fe12ca9567ef1550e430e8";s:8:"sort_key";i:8;s:6:"effect";s:15:"-66940537480942";s:5:"block";i:66807079;s:4:"time";s:19:"2024-07-23 14:21:10";}i:9;a:7:{s:11:"transaction";s:66:"0x5924bb978b10140c9789da5d7a3c63790dd3530c7c2b852495fd4bb6cfc39599";s:8:"currency";s:42:"0xdeaddeaddeaddeaddeaddeaddeaddeaddead1111";s:7:"address";s:42:"0x41621b2e924a3746ab6ec90bfbf3835e2a71648a";s:8:"sort_key";i:9;s:6:"effect";s:14:"66940537480942";s:5:"block";i:66807079;s:4:"time";s:19:"2024-07-23 14:21:10";}i:10;a:7:{s:11:"transaction";s:66:"0x5924bb978b10140c9789da5d7a3c63790dd3530c7c2b852495fd4bb6cfc39599";s:8:"currency";s:42:"0x201eba5cc46d216ce6dc03f6a759e8e766e956ae";s:7:"address";s:42:"0x41621b2e924a3746ab6ec90bfbf3835e2a71648a";s:8:"sort_key";i:10;s:6:"effect";s:7:"-232500";s:5:"block";i:66807079;s:4:"time";s:19:"2024-07-23 14:21:10";}i:11;a:7:{s:11:"transaction";s:66:"0x5924bb978b10140c9789da5d7a3c63790dd3530c7c2b852495fd4bb6cfc39599";s:8:"currency";s:42:"0x201eba5cc46d216ce6dc03f6a759e8e766e956ae";s:7:"address";s:42:"0xa125af1a4704044501fe12ca9567ef1550e430e8";s:8:"sort_key";i:11;s:6:"effect";s:6:"232500";s:5:"block";i:66807079;s:4:"time";s:19:"2024-07-23 14:21:10";}i:12;a:7:{s:11:"transaction";s:66:"0x9d3bf485c6fb13b3980cb1706c40f5ce741edc4b08e0830cf067149a5080420c";s:8:"currency";s:42:"0x09bc4e0d864854c6afb6eb9a9cdf58ac190d0df9";s:7:"address";s:42:"0x08fdf9fc4a6eb2a28007d82ae2d9fa4ac29ffa7a";s:8:"sort_key";i:12;s:6:"effect";s:7:"-175000";s:5:"block";i:66807079;s:4:"time";s:19:"2024-07-23 14:21:10";}i:13;a:7:{s:11:"transaction";s:66:"0x9d3bf485c6fb13b3980cb1706c40f5ce741edc4b08e0830cf067149a5080420c";s:8:"currency";s:42:"0x09bc4e0d864854c6afb6eb9a9cdf58ac190d0df9";s:7:"address";s:42:"0x8e3a13418743ab1a98434551937ea687e451b589";s:8:"sort_key";i:13;s:6:"effect";s:6:"175000";s:5:"block";i:66807079;s:4:"time";s:19:"2024-07-23 14:21:10";}i:14;a:7:{s:11:"transaction";s:66:"0x9d3bf485c6fb13b3980cb1706c40f5ce741edc4b08e0830cf067149a5080420c";s:8:"currency";s:42:"0x201eba5cc46d216ce6dc03f6a759e8e766e956ae";s:7:"address";s:42:"0x8e3a13418743ab1a98434551937ea687e451b589";s:8:"sort_key";i:14;s:6:"effect";s:7:"-173904";s:5:"block";i:66807079;s:4:"time";s:19:"2024-07-23 14:21:10";}i:15;a:7:{s:11:"transaction";s:66:"0x9d3bf485c6fb13b3980cb1706c40f5ce741edc4b08e0830cf067149a5080420c";s:8:"currency";s:42:"0x201eba5cc46d216ce6dc03f6a759e8e766e956ae";s:7:"address";s:42:"0x08fdf9fc4a6eb2a28007d82ae2d9fa4ac29ffa7a";s:8:"sort_key";i:15;s:6:"effect";s:6:"173904";s:5:"block";i:66807079;s:4:"time";s:19:"2024-07-23 14:21:10";}}s:10:"currencies";a:3:{i:0;a:4:{s:2:"id";s:42:"0xdeaddeaddeaddeaddeaddeaddeaddeaddead1111";s:4:"name";s:5:"Ether";s:6:"symbol";s:4:"WETH";s:8:"decimals";i:18;}i:1;a:4:{s:2:"id";s:42:"0x201eba5cc46d216ce6dc03f6a759e8e766e956ae";s:4:"name";s:10:"Tether USD";s:6:"symbol";s:4:"USDT";s:8:"decimals";i:6;}i:2;a:4:{s:2:"id";s:42:"0x09bc4e0d864854c6afb6eb9a9cdf58ac190d0df9";s:4:"name";s:8:"USD Coin";s:6:"symbol";s:4:"USDC";s:8:"decimals";i:6;}}}'], 
        ];
    }
}
