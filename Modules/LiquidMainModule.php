<?php declare(strict_types = 1);

/*  Idea (c) 2023 Nikita Zhavoronkov, nikzh@nikzh.com
 *  Copyright (c) 2023 3xpl developers, 3@3xpl.com, see CONTRIBUTORS.md
 *  Distributed under the MIT software license, see LICENSE.md  */

/*  This is the main Liquid Bitcoin module. */

final class LiquidMainModule extends UTXOMainModule implements Module
{
    function initialize()
    {
        // CoreModule
        $this->blockchain = 'liquid';
        $this->module = 'liquid-main';
        $this->is_main = true;
        $this->currency = 'liquid'; // Static
        $this->currency_details = ['name' => 'Liquid Bitcoin', 'symbol' => 'L-BTC', 'decimals' => 8, 'description' => null];
        $this->first_block_date = '2018-09-27';

        // UTXOMainModule
        $this->p2pk_prefix1 = '';
        $this->p2pk_prefix2 = '';

        // Liquid-specific
        $this->privacy_model = PrivacyModel::Mixed;
        $this->ignore_sum_of_all_effects = true; // Cause of PrivacyModel::Mixed
        $this->extra_features = [UTXOSpecialFeatures::LiquidBitcoin, UTXOSpecialFeatures::OneAddressInScriptPubKey];
        $this->native_asset = '6f0279e9ed041c3d710a9f57d0c02928416460c4b722ae3457a11eec381c526d';

        // Tests
        $this->tests = [
            // Some block
            ['block' => 2766919, 'result' => 'a:2:{s:6:"events";a:13:{i:0;a:6:{s:11:"transaction";s:64:"4f6762c0a0c639b452fe5de2272cfa59348ca36580b83cc942838a580b55cbdc";s:7:"address";s:8:"the-void";s:6:"effect";s:4:"-446";s:5:"block";i:2766919;s:4:"time";s:19:"2024-03-13 14:45:08";s:8:"sort_key";i:0;}i:1;a:6:{s:11:"transaction";s:64:"4f6762c0a0c639b452fe5de2272cfa59348ca36580b83cc942838a580b55cbdc";s:7:"address";s:39:"script-efcb3e8b994fe44d9b6dd0b55ab213a0";s:6:"effect";s:1:"0";s:5:"block";i:2766919;s:4:"time";s:19:"2024-03-13 14:45:08";s:8:"sort_key";i:1;}i:2;a:6:{s:11:"transaction";s:64:"4f6762c0a0c639b452fe5de2272cfa59348ca36580b83cc942838a580b55cbdc";s:7:"address";s:34:"QLFdUboUPJnUzvsXKu83hUtrQ1DuxyggRg";s:6:"effect";s:3:"446";s:5:"block";i:2766919;s:4:"time";s:19:"2024-03-13 14:45:08";s:8:"sort_key";i:2;}i:3;a:6:{s:11:"transaction";s:64:"4f6762c0a0c639b452fe5de2272cfa59348ca36580b83cc942838a580b55cbdc";s:7:"address";s:39:"script-287938b14253c57813474cb5eaf51d63";s:6:"effect";s:1:"0";s:5:"block";i:2766919;s:4:"time";s:19:"2024-03-13 14:45:08";s:8:"sort_key";i:3;}i:4;a:6:{s:11:"transaction";s:64:"7a731e79ae494ce4540322ea17a700eb050e1026009d49effea59b6b4985975c";s:7:"address";s:42:"ex1qq2wh460mj56u5dunv8g9e4demrfa3sh723hums";s:6:"effect";s:2:"-?";s:5:"block";i:2766919;s:4:"time";s:19:"2024-03-13 14:45:08";s:8:"sort_key";i:4;}i:5;a:6:{s:11:"transaction";s:64:"7a731e79ae494ce4540322ea17a700eb050e1026009d49effea59b6b4985975c";s:7:"address";s:42:"ex1qn84sc3540g7v8qr4j0tdsfa6qlshzsn47rz3yh";s:6:"effect";s:2:"-?";s:5:"block";i:2766919;s:4:"time";s:19:"2024-03-13 14:45:08";s:8:"sort_key";i:5;}i:6;a:6:{s:11:"transaction";s:64:"7a731e79ae494ce4540322ea17a700eb050e1026009d49effea59b6b4985975c";s:7:"address";s:42:"ex1qwmyrwfm2fkcf82qmayhg22nh455ecyk4pqdp69";s:6:"effect";s:2:"-?";s:5:"block";i:2766919;s:4:"time";s:19:"2024-03-13 14:45:08";s:8:"sort_key";i:6;}i:7;a:6:{s:11:"transaction";s:64:"7a731e79ae494ce4540322ea17a700eb050e1026009d49effea59b6b4985975c";s:7:"address";s:62:"ex1qemcjtseyldmga7axcv4sfq4dz3vap96snpe70huyalv84hxmn8wsty4yuv";s:6:"effect";s:2:"+?";s:5:"block";i:2766919;s:4:"time";s:19:"2024-03-13 14:45:08";s:8:"sort_key";i:7;}i:8;a:6:{s:11:"transaction";s:64:"7a731e79ae494ce4540322ea17a700eb050e1026009d49effea59b6b4985975c";s:7:"address";s:42:"ex1qzhftnsrlr9x3vn9du9lgtqqllux2elpe2mva6w";s:6:"effect";s:2:"+?";s:5:"block";i:2766919;s:4:"time";s:19:"2024-03-13 14:45:08";s:8:"sort_key";i:8;}i:9;a:6:{s:11:"transaction";s:64:"7a731e79ae494ce4540322ea17a700eb050e1026009d49effea59b6b4985975c";s:7:"address";s:8:"the-void";s:6:"effect";s:3:"294";s:5:"block";i:2766919;s:4:"time";s:19:"2024-03-13 14:45:08";s:8:"sort_key";i:9;}i:10;a:6:{s:11:"transaction";s:64:"57b56f5b9ec72c95cf3431e1fe9e1ec528ebbbc4b59819fd701484fca5d43b88";s:7:"address";s:62:"ex1qemcjtseyldmga7axcv4sfq4dz3vap96snpe70huyalv84hxmn8wsty4yuv";s:6:"effect";s:2:"-?";s:5:"block";i:2766919;s:4:"time";s:19:"2024-03-13 14:45:08";s:8:"sort_key";i:10;}i:11;a:6:{s:11:"transaction";s:64:"57b56f5b9ec72c95cf3431e1fe9e1ec528ebbbc4b59819fd701484fca5d43b88";s:7:"address";s:34:"GteSSbj2k7EmNCXqnNnagGsTPVQ6S93N6n";s:6:"effect";s:2:"+?";s:5:"block";i:2766919;s:4:"time";s:19:"2024-03-13 14:45:08";s:8:"sort_key";i:11;}i:12;a:6:{s:11:"transaction";s:64:"57b56f5b9ec72c95cf3431e1fe9e1ec528ebbbc4b59819fd701484fca5d43b88";s:7:"address";s:8:"the-void";s:6:"effect";s:3:"152";s:5:"block";i:2766919;s:4:"time";s:19:"2024-03-13 14:45:08";s:8:"sort_key";i:12;}}s:10:"currencies";N;}'],
            // Block with pegin
            ['block' => 2766423, 'result' => 'a:2:{s:6:"events";a:10:{i:0;a:6:{s:11:"transaction";s:64:"eac7bddebcc5c76b9bc548115c7e3144d6c6654abb4ab76227374816436a15e6";s:7:"address";s:8:"the-void";s:6:"effect";s:3:"-86";s:5:"block";i:2766423;s:4:"time";s:19:"2024-03-13 06:29:08";s:8:"sort_key";i:0;}i:1;a:6:{s:11:"transaction";s:64:"eac7bddebcc5c76b9bc548115c7e3144d6c6654abb4ab76227374816436a15e6";s:7:"address";s:39:"script-14b005d6cde92956f8acef08cd554ebd";s:6:"effect";s:1:"0";s:5:"block";i:2766423;s:4:"time";s:19:"2024-03-13 06:29:08";s:8:"sort_key";i:1;}i:2;a:6:{s:11:"transaction";s:64:"eac7bddebcc5c76b9bc548115c7e3144d6c6654abb4ab76227374816436a15e6";s:7:"address";s:34:"QLFdUboUPJnUzvsXKu83hUtrQ1DuxyggRg";s:6:"effect";s:2:"86";s:5:"block";i:2766423;s:4:"time";s:19:"2024-03-13 06:29:08";s:8:"sort_key";i:2;}i:3;a:6:{s:11:"transaction";s:64:"eac7bddebcc5c76b9bc548115c7e3144d6c6654abb4ab76227374816436a15e6";s:7:"address";s:39:"script-08be25e98319c0bfe137f3102fbc496c";s:6:"effect";s:1:"0";s:5:"block";i:2766423;s:4:"time";s:19:"2024-03-13 06:29:08";s:8:"sort_key";i:3;}i:4;a:6:{s:11:"transaction";s:64:"9d9209113c3ded3a1a9a28be5b1227206d94b49df8f3adbbb343002d2d90fe00";s:7:"address";s:7:"bitcoin";s:6:"effect";s:8:"-2497468";s:5:"block";i:2766423;s:4:"time";s:19:"2024-03-13 06:29:08";s:8:"sort_key";i:4;}i:5;a:6:{s:11:"transaction";s:64:"9d9209113c3ded3a1a9a28be5b1227206d94b49df8f3adbbb343002d2d90fe00";s:7:"address";s:42:"ex1q4q240cjajpc2jy7kcs09zqsqh3xalfzeectgay";s:6:"effect";s:7:"2497468";s:5:"block";i:2766423;s:4:"time";s:19:"2024-03-13 06:29:08";s:8:"sort_key";i:5;}i:6;a:6:{s:11:"transaction";s:64:"9d9209113c3ded3a1a9a28be5b1227206d94b49df8f3adbbb343002d2d90fe00";s:7:"address";s:8:"the-void";s:6:"effect";s:2:"43";s:5:"block";i:2766423;s:4:"time";s:19:"2024-03-13 06:29:08";s:8:"sort_key";i:6;}i:7;a:6:{s:11:"transaction";s:64:"cf2e9f28f41e6a5ebdaee32c17123b36616283728d850842206b4204291717a5";s:7:"address";s:7:"bitcoin";s:6:"effect";s:8:"-1548364";s:5:"block";i:2766423;s:4:"time";s:19:"2024-03-13 06:29:08";s:8:"sort_key";i:7;}i:8;a:6:{s:11:"transaction";s:64:"cf2e9f28f41e6a5ebdaee32c17123b36616283728d850842206b4204291717a5";s:7:"address";s:42:"ex1qvtp03vtzeru6lff556xx7xssvm3a3mlzjtxdme";s:6:"effect";s:7:"1548364";s:5:"block";i:2766423;s:4:"time";s:19:"2024-03-13 06:29:08";s:8:"sort_key";i:8;}i:9;a:6:{s:11:"transaction";s:64:"cf2e9f28f41e6a5ebdaee32c17123b36616283728d850842206b4204291717a5";s:7:"address";s:8:"the-void";s:6:"effect";s:2:"43";s:5:"block";i:2766423;s:4:"time";s:19:"2024-03-13 06:29:08";s:8:"sort_key";i:9;}}s:10:"currencies";N;}'],
            // Block with assets
            ['block' => 2766264, 'result' => 'a:2:{s:6:"events";a:8:{i:0;a:6:{s:11:"transaction";s:64:"8285e7867e524659c5cb2850e2dbc8d5d658cef43a87582e43588d3dee9b8b5b";s:7:"address";s:8:"the-void";s:6:"effect";s:4:"-319";s:5:"block";i:2766264;s:4:"time";s:19:"2024-03-13 03:50:08";s:8:"sort_key";i:0;}i:1;a:6:{s:11:"transaction";s:64:"8285e7867e524659c5cb2850e2dbc8d5d658cef43a87582e43588d3dee9b8b5b";s:7:"address";s:39:"script-81f8057b579b326fedf8d76b33d87165";s:6:"effect";s:1:"0";s:5:"block";i:2766264;s:4:"time";s:19:"2024-03-13 03:50:08";s:8:"sort_key";i:1;}i:2;a:6:{s:11:"transaction";s:64:"8285e7867e524659c5cb2850e2dbc8d5d658cef43a87582e43588d3dee9b8b5b";s:7:"address";s:34:"QLFdUboUPJnUzvsXKu83hUtrQ1DuxyggRg";s:6:"effect";s:3:"319";s:5:"block";i:2766264;s:4:"time";s:19:"2024-03-13 03:50:08";s:8:"sort_key";i:2;}i:3;a:6:{s:11:"transaction";s:64:"8285e7867e524659c5cb2850e2dbc8d5d658cef43a87582e43588d3dee9b8b5b";s:7:"address";s:39:"script-616f900e387746e1e4b116ef73f6ccb3";s:6:"effect";s:1:"0";s:5:"block";i:2766264;s:4:"time";s:19:"2024-03-13 03:50:08";s:8:"sort_key";i:3;}i:4;a:6:{s:11:"transaction";s:64:"1fc472aaff27c643608be24f6b86f8f5230068db98f7e2ddd7c0a4fc7d1f6c86";s:7:"address";s:62:"ex1qlg7hpqluy7xccvgscw7qww0cdkr8lcccsjk0lc7ay6e3spze3ruqapqwlw";s:6:"effect";s:2:"-?";s:5:"block";i:2766264;s:4:"time";s:19:"2024-03-13 03:50:08";s:8:"sort_key";i:4;}i:5;a:6:{s:11:"transaction";s:64:"1fc472aaff27c643608be24f6b86f8f5230068db98f7e2ddd7c0a4fc7d1f6c86";s:7:"address";s:62:"ex1qvgn6f95j4kf84quk0w0ad0mayruv2guuph5rvl8jjq2u4spqu9pseyzl2w";s:6:"effect";s:2:"-?";s:5:"block";i:2766264;s:4:"time";s:19:"2024-03-13 03:50:08";s:8:"sort_key";i:5;}i:6;a:6:{s:11:"transaction";s:64:"1fc472aaff27c643608be24f6b86f8f5230068db98f7e2ddd7c0a4fc7d1f6c86";s:7:"address";s:62:"ex1qysz258hssf960jhljqmyaea9257qn3w7mc06272kf5y8gdx06d2qvm74k3";s:6:"effect";s:2:"+?";s:5:"block";i:2766264;s:4:"time";s:19:"2024-03-13 03:50:08";s:8:"sort_key";i:6;}i:7;a:6:{s:11:"transaction";s:64:"1fc472aaff27c643608be24f6b86f8f5230068db98f7e2ddd7c0a4fc7d1f6c86";s:7:"address";s:8:"the-void";s:6:"effect";s:3:"319";s:5:"block";i:2766264;s:4:"time";s:19:"2024-03-13 03:50:08";s:8:"sort_key";i:7;}}s:10:"currencies";N;}'],
        ];
    }
}
