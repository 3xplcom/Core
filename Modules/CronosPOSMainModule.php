<?php declare(strict_types=1);

/*  Idea (c) 2023 Nikita Zhavoronkov, nikzh@nikzh.com
 *  Copyright (c) 2023 3xpl developers, 3@3xpl.com, see CONTRIBUTORS.md
 *  Distributed under the MIT software license, see LICENSE.md  */

/*  This is the main Cronos POS module. */

final class CronosPOSMainModule extends CosmosMainModule implements Module
{
    function initialize()
    {
        // CoreModule
        $this->blockchain = 'cronos-pos';
        $this->module = 'cronos-pos-main';
        $this->is_main = true;
        $this->first_block_id = 1;
        $this->first_block_date = '2021-03-25';
        $this->currency = 'cronos';
        $this->currency_details = ['name' => 'Cronos', 'symbol' => 'CRO', 'decimals' => 8, 'description' => null];

        // Cosmos-specific
        $this->cosmos_special_addresses = [
            // At each block, all fees received are transferred to fee_collector.
            'fee_collector' => 'cro17xpfvakm2amg962yls6f84z3kell8c5lgztehv'
        ];
        $this->cosmos_known_denoms = ['basecro' => 0];
        // since: https://github.com/crypto-org-chain/chain-main/releases/tag/v3.0.0
        // Cronos POS supports SDK 0.43.0
        $this->cosmos_coin_events_fork = 3526800;

        $this->tests = [
            // Block after Bank fork
            ['block' => 15722786, 'result' => 'a:2:{s:6:"events";a:12:{i:0;a:8:{s:11:"transaction";s:64:"51b7fd65dd262c1577cc9815dfbea14578ac51380bc757931be79fa2a715260f";s:8:"sort_key";i:0;s:7:"address";s:42:"cro1y9mgq4htwehpv9cvs6ydp9uwz93dj0zqwklvau";s:6:"effect";s:6:"-20000";s:6:"failed";s:1:"f";s:5:"extra";s:1:"f";s:5:"block";i:15722786;s:4:"time";s:19:"2024-01-26 06:11:44";}i:1;a:8:{s:11:"transaction";s:64:"51b7fd65dd262c1577cc9815dfbea14578ac51380bc757931be79fa2a715260f";s:8:"sort_key";i:1;s:7:"address";s:42:"cro17xpfvakm2amg962yls6f84z3kell8c5lgztehv";s:6:"effect";s:5:"20000";s:6:"failed";s:1:"f";s:5:"extra";s:1:"f";s:5:"block";i:15722786;s:4:"time";s:19:"2024-01-26 06:11:44";}i:2;a:8:{s:11:"transaction";s:64:"51b7fd65dd262c1577cc9815dfbea14578ac51380bc757931be79fa2a715260f";s:8:"sort_key";i:2;s:7:"address";s:42:"cro1jv65s3grqf6v6jl3dp4t6c9t9rk99cd8lyv94w";s:6:"effect";s:11:"-1852327311";s:6:"failed";s:1:"f";s:5:"extra";N;s:5:"block";i:15722786;s:4:"time";s:19:"2024-01-26 06:11:44";}i:3;a:8:{s:11:"transaction";s:64:"51b7fd65dd262c1577cc9815dfbea14578ac51380bc757931be79fa2a715260f";s:8:"sort_key";i:3;s:7:"address";s:42:"cro1y9mgq4htwehpv9cvs6ydp9uwz93dj0zqwklvau";s:6:"effect";s:10:"1852327311";s:6:"failed";s:1:"f";s:5:"extra";N;s:5:"block";i:15722786;s:4:"time";s:19:"2024-01-26 06:11:44";}i:4;a:8:{s:11:"transaction";s:64:"51b7fd65dd262c1577cc9815dfbea14578ac51380bc757931be79fa2a715260f";s:8:"sort_key";i:4;s:7:"address";s:42:"cro1y9mgq4htwehpv9cvs6ydp9uwz93dj0zqwklvau";s:6:"effect";s:11:"-1852323393";s:6:"failed";s:1:"f";s:5:"extra";N;s:5:"block";i:15722786;s:4:"time";s:19:"2024-01-26 06:11:44";}i:5;a:8:{s:11:"transaction";s:64:"51b7fd65dd262c1577cc9815dfbea14578ac51380bc757931be79fa2a715260f";s:8:"sort_key";i:5;s:7:"address";s:42:"cro1fl48vsnmsdzcv85q5d2q4z5ajdha8yu3dqpk9x";s:6:"effect";s:10:"1852323393";s:6:"failed";s:1:"f";s:5:"extra";N;s:5:"block";i:15722786;s:4:"time";s:19:"2024-01-26 06:11:44";}i:6;a:8:{s:11:"transaction";N;s:8:"sort_key";i:6;s:7:"address";s:8:"the-void";s:6:"effect";s:12:"-10486209896";s:6:"failed";s:1:"f";s:5:"extra";N;s:5:"block";i:15722786;s:4:"time";s:19:"2024-01-26 06:11:44";}i:7;a:8:{s:11:"transaction";N;s:8:"sort_key";i:7;s:7:"address";s:42:"cro1m3h30wlvsf8llruxtpukdvsy0km2kum8s20pm3";s:6:"effect";s:11:"10486209896";s:6:"failed";s:1:"f";s:5:"extra";N;s:5:"block";i:15722786;s:4:"time";s:19:"2024-01-26 06:11:44";}i:8;a:8:{s:11:"transaction";N;s:8:"sort_key";i:8;s:7:"address";s:42:"cro1m3h30wlvsf8llruxtpukdvsy0km2kum8s20pm3";s:6:"effect";s:12:"-10486209896";s:6:"failed";s:1:"f";s:5:"extra";N;s:5:"block";i:15722786;s:4:"time";s:19:"2024-01-26 06:11:44";}i:9;a:8:{s:11:"transaction";N;s:8:"sort_key";i:9;s:7:"address";s:42:"cro17xpfvakm2amg962yls6f84z3kell8c5lgztehv";s:6:"effect";s:11:"10486209896";s:6:"failed";s:1:"f";s:5:"extra";N;s:5:"block";i:15722786;s:4:"time";s:19:"2024-01-26 06:11:44";}i:10;a:8:{s:11:"transaction";N;s:8:"sort_key";i:10;s:7:"address";s:42:"cro17xpfvakm2amg962yls6f84z3kell8c5lgztehv";s:6:"effect";s:12:"-10486242396";s:6:"failed";s:1:"f";s:5:"extra";N;s:5:"block";i:15722786;s:4:"time";s:19:"2024-01-26 06:11:44";}i:11;a:8:{s:11:"transaction";N;s:8:"sort_key";i:11;s:7:"address";s:42:"cro1jv65s3grqf6v6jl3dp4t6c9t9rk99cd8lyv94w";s:6:"effect";s:11:"10486242396";s:6:"failed";s:1:"f";s:5:"extra";N;s:5:"block";i:15722786;s:4:"time";s:19:"2024-01-26 06:11:44";}}s:10:"currencies";N;}'],
            // Block before Bank fork
            ['block' => 3526797, 'result' => 'a:2:{s:6:"events";a:14:{i:0;a:8:{s:11:"transaction";s:64:"ff3bd86a7686fd722e45dcc2032bdb9c88ce4596bfe36ad95783ecbbf9dcb772";s:8:"sort_key";i:0;s:7:"address";s:42:"cro1lvk850fd64lga5yue6er893pwret2ttev893t4";s:6:"effect";s:6:"-20000";s:6:"failed";s:1:"f";s:5:"extra";s:1:"f";s:5:"block";i:3526797;s:4:"time";s:19:"2021-12-07 01:24:07";}i:1;a:8:{s:11:"transaction";s:64:"ff3bd86a7686fd722e45dcc2032bdb9c88ce4596bfe36ad95783ecbbf9dcb772";s:8:"sort_key";i:1;s:7:"address";s:42:"cro17xpfvakm2amg962yls6f84z3kell8c5lgztehv";s:6:"effect";s:5:"20000";s:6:"failed";s:1:"f";s:5:"extra";s:1:"f";s:5:"block";i:3526797;s:4:"time";s:19:"2021-12-07 01:24:07";}i:2;a:8:{s:11:"transaction";s:64:"ff3bd86a7686fd722e45dcc2032bdb9c88ce4596bfe36ad95783ecbbf9dcb772";s:8:"sort_key";i:2;s:7:"address";s:42:"cro1lvk850fd64lga5yue6er893pwret2ttev893t4";s:6:"effect";s:13:"-821200000000";s:6:"failed";s:1:"f";s:5:"extra";N;s:5:"block";i:3526797;s:4:"time";s:19:"2021-12-07 01:24:07";}i:3;a:8:{s:11:"transaction";s:64:"ff3bd86a7686fd722e45dcc2032bdb9c88ce4596bfe36ad95783ecbbf9dcb772";s:8:"sort_key";i:3;s:7:"address";s:42:"cro1hcea3h0ykw4jqyjhj3tnydsk22s06adhd4ul3z";s:6:"effect";s:12:"821200000000";s:6:"failed";s:1:"f";s:5:"extra";N;s:5:"block";i:3526797;s:4:"time";s:19:"2021-12-07 01:24:07";}i:4;a:8:{s:11:"transaction";s:64:"a7485296b6fa762b468a25730b6549dfb0eb49cee0cf2545ab1ca34dde4a7cc3";s:8:"sort_key";i:4;s:7:"address";s:42:"cro1q040rm026jmpfmxdsj6q9phm9tdceepnsau6me";s:6:"effect";s:5:"-4152";s:6:"failed";s:1:"f";s:5:"extra";s:1:"f";s:5:"block";i:3526797;s:4:"time";s:19:"2021-12-07 01:24:07";}i:5;a:8:{s:11:"transaction";s:64:"a7485296b6fa762b468a25730b6549dfb0eb49cee0cf2545ab1ca34dde4a7cc3";s:8:"sort_key";i:5;s:7:"address";s:42:"cro17xpfvakm2amg962yls6f84z3kell8c5lgztehv";s:6:"effect";s:4:"4152";s:6:"failed";s:1:"f";s:5:"extra";s:1:"f";s:5:"block";i:3526797;s:4:"time";s:19:"2021-12-07 01:24:07";}i:6;a:8:{s:11:"transaction";s:64:"3f4794ad0ed029c3bd1ff4852b4c8c3e5aaf3c74f44f2c79db4241a763814e24";s:8:"sort_key";i:6;s:7:"address";s:42:"cro1ghd7rv6zg7pqhu8v2e4s9j0vy0x4edcgul6lmk";s:6:"effect";s:6:"-20000";s:6:"failed";s:1:"f";s:5:"extra";s:1:"f";s:5:"block";i:3526797;s:4:"time";s:19:"2021-12-07 01:24:07";}i:7;a:8:{s:11:"transaction";s:64:"3f4794ad0ed029c3bd1ff4852b4c8c3e5aaf3c74f44f2c79db4241a763814e24";s:8:"sort_key";i:7;s:7:"address";s:42:"cro17xpfvakm2amg962yls6f84z3kell8c5lgztehv";s:6:"effect";s:5:"20000";s:6:"failed";s:1:"f";s:5:"extra";s:1:"f";s:5:"block";i:3526797;s:4:"time";s:19:"2021-12-07 01:24:07";}i:8;a:8:{s:11:"transaction";s:64:"3f4794ad0ed029c3bd1ff4852b4c8c3e5aaf3c74f44f2c79db4241a763814e24";s:8:"sort_key";i:8;s:7:"address";s:42:"cro1ghd7rv6zg7pqhu8v2e4s9j0vy0x4edcgul6lmk";s:6:"effect";s:10:"-400000000";s:6:"failed";s:1:"f";s:5:"extra";N;s:5:"block";i:3526797;s:4:"time";s:19:"2021-12-07 01:24:07";}i:9;a:8:{s:11:"transaction";s:64:"3f4794ad0ed029c3bd1ff4852b4c8c3e5aaf3c74f44f2c79db4241a763814e24";s:8:"sort_key";i:9;s:7:"address";s:42:"cro1hcea3h0ykw4jqyjhj3tnydsk22s06adhd4ul3z";s:6:"effect";s:9:"400000000";s:6:"failed";s:1:"f";s:5:"extra";N;s:5:"block";i:3526797;s:4:"time";s:19:"2021-12-07 01:24:07";}i:10;a:8:{s:11:"transaction";N;s:8:"sort_key";i:10;s:7:"address";s:42:"cro1m3h30wlvsf8llruxtpukdvsy0km2kum8s20pm3";s:6:"effect";s:11:"-8767439799";s:6:"failed";s:1:"f";s:5:"extra";N;s:5:"block";i:3526797;s:4:"time";s:19:"2021-12-07 01:24:07";}i:11;a:8:{s:11:"transaction";N;s:8:"sort_key";i:11;s:7:"address";s:42:"cro17xpfvakm2amg962yls6f84z3kell8c5lgztehv";s:6:"effect";s:10:"8767439799";s:6:"failed";s:1:"f";s:5:"extra";N;s:5:"block";i:3526797;s:4:"time";s:19:"2021-12-07 01:24:07";}i:12;a:8:{s:11:"transaction";N;s:8:"sort_key";i:12;s:7:"address";s:42:"cro17xpfvakm2amg962yls6f84z3kell8c5lgztehv";s:6:"effect";s:11:"-8767547664";s:6:"failed";s:1:"f";s:5:"extra";N;s:5:"block";i:3526797;s:4:"time";s:19:"2021-12-07 01:24:07";}i:13;a:8:{s:11:"transaction";N;s:8:"sort_key";i:13;s:7:"address";s:42:"cro1jv65s3grqf6v6jl3dp4t6c9t9rk99cd8lyv94w";s:6:"effect";s:10:"8767547664";s:6:"failed";s:1:"f";s:5:"extra";N;s:5:"block";i:3526797;s:4:"time";s:19:"2021-12-07 01:24:07";}}s:10:"currencies";N;}'],
        ];
    }
}
