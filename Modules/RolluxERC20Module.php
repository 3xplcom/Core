<?php declare(strict_types = 1);

/*  Idea (c) 2023 Nikita Zhavoronkov, nikzh@nikzh.com
 *  Copyright (c) 2023-2024 3xpl developers, 3@3xpl.com, see CONTRIBUTORS.md
 *  Distributed under the MIT software license, see LICENSE.md  */

/*  This module processes ERC-20 token transfers in Rollux. It requires a geth node to run.  */

final class RolluxERC20Module extends EVMERC20Module implements Module
{
    function initialize()
    {
        // CoreModule
        $this->blockchain = 'rollux';
        $this->module = 'rollux-erc-20';
        $this->is_main = false;
        $this->first_block_date = '2023-06-21';
        $this->first_block_id = 0;

        $this->tests = [
            ['block' => 16686745, 'result' => 'a:2:{s:6:"events";a:26:{i:0;a:7:{s:11:"transaction";s:66:"0x377831e603911757665d50cdd461021f9b9c0916ec7b15163110814b2edca197";s:8:"currency";s:42:"0x28c9c7fb3fe3104d2116af26cc8ef7905547349c";s:7:"address";s:42:"0xab07b0c933dacb9d776af7dfaa814a4e3bea8d9a";s:8:"sort_key";i:0;s:6:"effect";s:7:"-180192";s:5:"block";i:16686745;s:4:"time";s:19:"2024-07-11 22:58:51";}i:1;a:7:{s:11:"transaction";s:66:"0x377831e603911757665d50cdd461021f9b9c0916ec7b15163110814b2edca197";s:8:"currency";s:42:"0x28c9c7fb3fe3104d2116af26cc8ef7905547349c";s:7:"address";s:42:"0x8421c6102ee8a147facc01977df3b159f7921d54";s:8:"sort_key";i:1;s:6:"effect";s:6:"180192";s:5:"block";i:16686745;s:4:"time";s:19:"2024-07-11 22:58:51";}i:2;a:7:{s:11:"transaction";s:66:"0x377831e603911757665d50cdd461021f9b9c0916ec7b15163110814b2edca197";s:8:"currency";s:42:"0x48023b16c3e81aa7f6effbdeb35bb83f4f31a8fd";s:7:"address";s:42:"0xab07b0c933dacb9d776af7dfaa814a4e3bea8d9a";s:8:"sort_key";i:2;s:6:"effect";s:21:"-14339620384511699566";s:5:"block";i:16686745;s:4:"time";s:19:"2024-07-11 22:58:51";}i:3;a:7:{s:11:"transaction";s:66:"0x377831e603911757665d50cdd461021f9b9c0916ec7b15163110814b2edca197";s:8:"currency";s:42:"0x48023b16c3e81aa7f6effbdeb35bb83f4f31a8fd";s:7:"address";s:42:"0x8421c6102ee8a147facc01977df3b159f7921d54";s:8:"sort_key";i:3;s:6:"effect";s:20:"14339620384511699566";s:5:"block";i:16686745;s:4:"time";s:19:"2024-07-11 22:58:51";}i:4;a:7:{s:11:"transaction";s:66:"0x377831e603911757665d50cdd461021f9b9c0916ec7b15163110814b2edca197";s:8:"currency";s:42:"0x28c9c7fb3fe3104d2116af26cc8ef7905547349c";s:7:"address";s:42:"0x8421c6102ee8a147facc01977df3b159f7921d54";s:8:"sort_key";i:4;s:6:"effect";s:6:"-36038";s:5:"block";i:16686745;s:4:"time";s:19:"2024-07-11 22:58:51";}i:5;a:7:{s:11:"transaction";s:66:"0x377831e603911757665d50cdd461021f9b9c0916ec7b15163110814b2edca197";s:8:"currency";s:42:"0x28c9c7fb3fe3104d2116af26cc8ef7905547349c";s:7:"address";s:42:"0x7e9035e18fdc308b82f3bd03a923d384bc296bfa";s:8:"sort_key";i:5;s:6:"effect";s:5:"36038";s:5:"block";i:16686745;s:4:"time";s:19:"2024-07-11 22:58:51";}i:6;a:7:{s:11:"transaction";s:66:"0x377831e603911757665d50cdd461021f9b9c0916ec7b15163110814b2edca197";s:8:"currency";s:42:"0x48023b16c3e81aa7f6effbdeb35bb83f4f31a8fd";s:7:"address";s:42:"0x8421c6102ee8a147facc01977df3b159f7921d54";s:8:"sort_key";i:6;s:6:"effect";s:20:"-2867924076902339913";s:5:"block";i:16686745;s:4:"time";s:19:"2024-07-11 22:58:51";}i:7;a:7:{s:11:"transaction";s:66:"0x377831e603911757665d50cdd461021f9b9c0916ec7b15163110814b2edca197";s:8:"currency";s:42:"0x48023b16c3e81aa7f6effbdeb35bb83f4f31a8fd";s:7:"address";s:42:"0x7e9035e18fdc308b82f3bd03a923d384bc296bfa";s:8:"sort_key";i:7;s:6:"effect";s:19:"2867924076902339913";s:5:"block";i:16686745;s:4:"time";s:19:"2024-07-11 22:58:51";}i:8;a:7:{s:11:"transaction";s:66:"0x377831e603911757665d50cdd461021f9b9c0916ec7b15163110814b2edca197";s:8:"currency";s:42:"0x28c9c7fb3fe3104d2116af26cc8ef7905547349c";s:7:"address";s:42:"0xab07b0c933dacb9d776af7dfaa814a4e3bea8d9a";s:8:"sort_key";i:8;s:6:"effect";s:8:"-5425634";s:5:"block";i:16686745;s:4:"time";s:19:"2024-07-11 22:58:51";}i:9;a:7:{s:11:"transaction";s:66:"0x377831e603911757665d50cdd461021f9b9c0916ec7b15163110814b2edca197";s:8:"currency";s:42:"0x28c9c7fb3fe3104d2116af26cc8ef7905547349c";s:7:"address";s:42:"0x8421c6102ee8a147facc01977df3b159f7921d54";s:8:"sort_key";i:9;s:6:"effect";s:7:"5425634";s:5:"block";i:16686745;s:4:"time";s:19:"2024-07-11 22:58:51";}i:10;a:7:{s:11:"transaction";s:66:"0x377831e603911757665d50cdd461021f9b9c0916ec7b15163110814b2edca197";s:8:"currency";s:42:"0x48023b16c3e81aa7f6effbdeb35bb83f4f31a8fd";s:7:"address";s:42:"0xab07b0c933dacb9d776af7dfaa814a4e3bea8d9a";s:8:"sort_key";i:10;s:6:"effect";s:22:"-431770145020104429890";s:5:"block";i:16686745;s:4:"time";s:19:"2024-07-11 22:58:51";}i:11;a:7:{s:11:"transaction";s:66:"0x377831e603911757665d50cdd461021f9b9c0916ec7b15163110814b2edca197";s:8:"currency";s:42:"0x48023b16c3e81aa7f6effbdeb35bb83f4f31a8fd";s:7:"address";s:42:"0x8421c6102ee8a147facc01977df3b159f7921d54";s:8:"sort_key";i:11;s:6:"effect";s:21:"431770145020104429890";s:5:"block";i:16686745;s:4:"time";s:19:"2024-07-11 22:58:51";}i:12;a:7:{s:11:"transaction";s:66:"0x377831e603911757665d50cdd461021f9b9c0916ec7b15163110814b2edca197";s:8:"currency";s:42:"0x28c9c7fb3fe3104d2116af26cc8ef7905547349c";s:7:"address";s:42:"0x8421c6102ee8a147facc01977df3b159f7921d54";s:8:"sort_key";i:12;s:6:"effect";s:8:"-1085126";s:5:"block";i:16686745;s:4:"time";s:19:"2024-07-11 22:58:51";}i:13;a:7:{s:11:"transaction";s:66:"0x377831e603911757665d50cdd461021f9b9c0916ec7b15163110814b2edca197";s:8:"currency";s:42:"0x28c9c7fb3fe3104d2116af26cc8ef7905547349c";s:7:"address";s:42:"0x7e9035e18fdc308b82f3bd03a923d384bc296bfa";s:8:"sort_key";i:13;s:6:"effect";s:7:"1085126";s:5:"block";i:16686745;s:4:"time";s:19:"2024-07-11 22:58:51";}i:14;a:7:{s:11:"transaction";s:66:"0x377831e603911757665d50cdd461021f9b9c0916ec7b15163110814b2edca197";s:8:"currency";s:42:"0x48023b16c3e81aa7f6effbdeb35bb83f4f31a8fd";s:7:"address";s:42:"0x8421c6102ee8a147facc01977df3b159f7921d54";s:8:"sort_key";i:14;s:6:"effect";s:21:"-86354029004020885978";s:5:"block";i:16686745;s:4:"time";s:19:"2024-07-11 22:58:51";}i:15;a:7:{s:11:"transaction";s:66:"0x377831e603911757665d50cdd461021f9b9c0916ec7b15163110814b2edca197";s:8:"currency";s:42:"0x48023b16c3e81aa7f6effbdeb35bb83f4f31a8fd";s:7:"address";s:42:"0x7e9035e18fdc308b82f3bd03a923d384bc296bfa";s:8:"sort_key";i:15;s:6:"effect";s:20:"86354029004020885978";s:5:"block";i:16686745;s:4:"time";s:19:"2024-07-11 22:58:51";}i:16;a:7:{s:11:"transaction";s:66:"0x377831e603911757665d50cdd461021f9b9c0916ec7b15163110814b2edca197";s:8:"currency";s:42:"0x28c9c7fb3fe3104d2116af26cc8ef7905547349c";s:7:"address";s:42:"0xe52fe994c84a1c32f4d43bda6121fedabde9f3f7";s:8:"sort_key";i:16;s:6:"effect";s:5:"-9029";s:5:"block";i:16686745;s:4:"time";s:19:"2024-07-11 22:58:51";}i:17;a:7:{s:11:"transaction";s:66:"0x377831e603911757665d50cdd461021f9b9c0916ec7b15163110814b2edca197";s:8:"currency";s:42:"0x28c9c7fb3fe3104d2116af26cc8ef7905547349c";s:7:"address";s:42:"0x8421c6102ee8a147facc01977df3b159f7921d54";s:8:"sort_key";i:17;s:6:"effect";s:4:"9029";s:5:"block";i:16686745;s:4:"time";s:19:"2024-07-11 22:58:51";}i:18;a:7:{s:11:"transaction";s:66:"0x377831e603911757665d50cdd461021f9b9c0916ec7b15163110814b2edca197";s:8:"currency";s:42:"0x48023b16c3e81aa7f6effbdeb35bb83f4f31a8fd";s:7:"address";s:42:"0xe52fe994c84a1c32f4d43bda6121fedabde9f3f7";s:8:"sort_key";i:18;s:6:"effect";s:20:"-5116180989887260184";s:5:"block";i:16686745;s:4:"time";s:19:"2024-07-11 22:58:51";}i:19;a:7:{s:11:"transaction";s:66:"0x377831e603911757665d50cdd461021f9b9c0916ec7b15163110814b2edca197";s:8:"currency";s:42:"0x48023b16c3e81aa7f6effbdeb35bb83f4f31a8fd";s:7:"address";s:42:"0x8421c6102ee8a147facc01977df3b159f7921d54";s:8:"sort_key";i:19;s:6:"effect";s:19:"5116180989887260184";s:5:"block";i:16686745;s:4:"time";s:19:"2024-07-11 22:58:51";}i:20;a:7:{s:11:"transaction";s:66:"0x377831e603911757665d50cdd461021f9b9c0916ec7b15163110814b2edca197";s:8:"currency";s:42:"0x28c9c7fb3fe3104d2116af26cc8ef7905547349c";s:7:"address";s:42:"0x8421c6102ee8a147facc01977df3b159f7921d54";s:8:"sort_key";i:20;s:6:"effect";s:8:"-4493691";s:5:"block";i:16686745;s:4:"time";s:19:"2024-07-11 22:58:51";}i:21;a:7:{s:11:"transaction";s:66:"0x377831e603911757665d50cdd461021f9b9c0916ec7b15163110814b2edca197";s:8:"currency";s:42:"0x28c9c7fb3fe3104d2116af26cc8ef7905547349c";s:7:"address";s:42:"0xab07b0c933dacb9d776af7dfaa814a4e3bea8d9a";s:8:"sort_key";i:21;s:6:"effect";s:7:"4493691";s:5:"block";i:16686745;s:4:"time";s:19:"2024-07-11 22:58:51";}i:22;a:7:{s:11:"transaction";s:66:"0x377831e603911757665d50cdd461021f9b9c0916ec7b15163110814b2edca197";s:8:"currency";s:42:"0x48023b16c3e81aa7f6effbdeb35bb83f4f31a8fd";s:7:"address";s:42:"0x8421c6102ee8a147facc01977df3b159f7921d54";s:8:"sort_key";i:22;s:6:"effect";s:22:"-306547047339742042061";s:5:"block";i:16686745;s:4:"time";s:19:"2024-07-11 22:58:51";}i:23;a:7:{s:11:"transaction";s:66:"0x377831e603911757665d50cdd461021f9b9c0916ec7b15163110814b2edca197";s:8:"currency";s:42:"0x48023b16c3e81aa7f6effbdeb35bb83f4f31a8fd";s:7:"address";s:42:"0xab07b0c933dacb9d776af7dfaa814a4e3bea8d9a";s:8:"sort_key";i:23;s:6:"effect";s:21:"306547047339742042061";s:5:"block";i:16686745;s:4:"time";s:19:"2024-07-11 22:58:51";}i:24;a:7:{s:11:"transaction";s:66:"0x377831e603911757665d50cdd461021f9b9c0916ec7b15163110814b2edca197";s:8:"currency";s:42:"0x8421c6102ee8a147facc01977df3b159f7921d54";s:7:"address";s:42:"0x0000000000000000000000000000000000000000";s:8:"sort_key";i:24;s:6:"effect";s:20:"-9953709226342834923";s:5:"block";i:16686745;s:4:"time";s:19:"2024-07-11 22:58:51";}i:25;a:7:{s:11:"transaction";s:66:"0x377831e603911757665d50cdd461021f9b9c0916ec7b15163110814b2edca197";s:8:"currency";s:42:"0x8421c6102ee8a147facc01977df3b159f7921d54";s:7:"address";s:42:"0xe52fe994c84a1c32f4d43bda6121fedabde9f3f7";s:8:"sort_key";i:25;s:6:"effect";s:19:"9953709226342834923";s:5:"block";i:16686745;s:4:"time";s:19:"2024-07-11 22:58:51";}}s:10:"currencies";a:3:{i:0;a:4:{s:2:"id";s:42:"0x28c9c7fb3fe3104d2116af26cc8ef7905547349c";s:4:"name";s:6:"Tether";s:6:"symbol";s:4:"USDT";s:8:"decimals";i:6;}i:1;a:4:{s:2:"id";s:42:"0x48023b16c3e81aa7f6effbdeb35bb83f4f31a8fd";s:4:"name";s:7:"Pegasys";s:6:"symbol";s:4:"PSYS";s:8:"decimals";i:18;}i:2;a:4:{s:2:"id";s:42:"0x8421c6102ee8a147facc01977df3b159f7921d54";s:4:"name";s:11:"xUSDT-PSYS3";s:6:"symbol";s:11:"xUSDT-PSYS3";s:8:"decimals";i:18;}}}'],
        ];
    }
}
